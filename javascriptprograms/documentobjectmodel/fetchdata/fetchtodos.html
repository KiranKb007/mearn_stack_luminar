<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>todos</h1>

    <button onclick="fetchtodo()">Fetch Todos</button>
    <table>
        <tr>
            <td>UserId</td>
            <td>Id</td>
            <td>Title</td>
            <td>
                completed
            </td>
            <tbody id="result">

            </tbody>
        </tr>
    </table>

</body>
<script>
    function displayValues(todos) {
        let html_data = "";
        for (let todo of todos) {
            html_data += `<tr><td>${todo.userId}</td><td>${todo.id}</td><td>${todo.title}</td><td>${todo.completed}</td></tr>`
        }
        result.innerHTML = html_data
    }


    // function fetchtodo(){
    //     var request = new XMLHttpRequest();
    //     request.open("get", "https://jsonplaceholder.typicode.com/todos")
    //     request.send()
    //     request.onreadystatechange = () => {
    //         if (request.readyState == 4) {
    //             if (request.status > 199 && request.status < 300) {
    //                 let todos = JSON.parse(request.responseText)
    //                 displayValues(todos)
    //             }
    //         }
    //     }
    // }

    // promise
    function fetchtodo(){
    fetch("https://jsonplaceholder.typicode.com/todos").
    // then(res=>res.json()).
    // then(data=>displayValues(data)).
    // catch(error=>alert(error))
    // }


    then(res=>{
        if(res.ok){
            return res.json()
        }
        else{
            throw new Error("failed to fetch data from requested url")
        }
    }).
    then(data=>console.log(data)).
    catch(error=>console.log(error.message))
}


</script>

</html>